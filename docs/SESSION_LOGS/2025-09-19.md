# Session Log 2025-09-19

What we focused on
- 매뉴얼 기반 OpenAI 프롬프트를 추가해 빈칸/주제/제목/어휘/요약/함축/무관 유형이 동일한 JSON 스키마(source, mainText, options, explanation)를 반환하도록 강제했다.
- 규칙 기반 generateGrammarSpanProblem을 새로 작성해 주어-동사 수일치, 관사, 대명사 혼동을 자동 삽입하도록 개선했다.
- ProblemDisplay와 스타일 파일을 개편해 순서배열/문장삽입과 동일한 다크 테마 카드, 출처/원문/지시문 레이아웃을 모든 유형에 적용했다.

Notes
- problem manual/*.md가 프롬프트 매뉴얼의 단일 소스로 사용된다.
- API 실패 시에도 폴백이 동일 구조를 제공하므로 프론트엔드 렌더러는 안정적으로 동작한다.

Next
- OpenAI 응답 품질을 샘플링하여 매뉴얼 기반 프롬프트가 안정적으로 작동하는지 지속 모니터링.
- PDF 파서 2단계 작업 재개(문단 병합, 출처 감지, 테스트 보강).
- PowerShell 포트 체크 스크립트를 마저 작성해 
pm run dev:check 자동화.
