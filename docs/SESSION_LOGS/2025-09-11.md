# 2025-09-11 Session Log

- Goal aligned: CSAT-Perfect pipeline (PDF → exact passages → standardized problems/UI)
- Implemented enhanced PDF parser (`server/utils/newPdfParser.js`):
  - Normalization (line endings, de-hyphenation, whitespace)
  - English-only line filtering and paragraph grouping
  - Marker-first segmentation draft: recognizes lines like `N. pX-no.Y(~Z)` and uses them for boundaries and sources
  - Batch test script added: `server/scripts/batch-parse-pdfs.js`
  - Single-text quick test: `server/scripts/test-parse.js`
- Grammar (earlier work): standardized question texts, safe underline rendering, legacy grammar prefill disabled
- README updated with plan, test instructions, and current state

Quick checkpoints
- pdfsample 전체 배치 파싱 수행 및 요약 출력
- 일부 문서(교과서형)는 영어 라인이 짧아 0개 추출 → 다음 라운드에서 짧은 라인 연속 합치기 강화 예정
- 시험지형 문서는 마커 패턴을 더 폭넓게 인식하도록 정규식 보강 필요(공백/하이픈/틸드 변형 포함)

Next immediate actions
- Marker-first 분할을 안정화하여 세 문서의 지문 개수/출처를 정확 매칭
- 교과서 레이아웃: 짧은 영어 라인 연속 합치기 규칙 추가
