# PROJECT_STATE.md

## 우리가 만드는 것
- PDF나 텍스트 지문을 업로드하면 **수능 스타일 문제·해설·분석**을 자동으로 만들어 주는 학습 플랫폼.
- 학생은 웹에서 문제를 풀고 채점·해설·랭킹·신고 기능을 이용할 수 있어요.
- 선생님(관리자)은 분석본을 검수하고, 마음에 들지 않는 변형을 삭제하거나 신고를 처리할 수 있어요.

## 기술 스택 & 핵심 명령어
- **백엔드**: Node.js 20 + Express, SQLite(sql.js) / OpenAI API (fallback은 WordNet + 자체 로직)
- **프런트엔드**: React 19 (CRA), Zustand + SWR
- **공통 명령**
  - 개발: `npm run dev:all` (백엔드 5000, 프런트 3000)
  - 테스트: `npm test`
  - 프런트 빌드: `npm run build`
  - 린트: `npm run lint`

## 최근 결정/하이라이트
- WordNet + 번역 캐시를 묶은 **분석 fallback 파이프라인**을 안정화해 해석·배경·예시·어법·어휘가 빈칸 없이 채워집니다.
- 관리자 페이지에 **분석본 삭제 / 404 안내 / CSV 내보내기 / 필터링**을 붙여 신고 대응 속도를 높였습니다.
- React 전역 테마 토큰을 정리해 다크 모드 대비 문제를 해결하고, 빌드 경고 없이 배포 가능해졌어요.
- Render + Vercel 배포 매뉴얼, 베타 체크리스트, seed 스크립트 흐름을 문서로 정리했습니다.

## 현재 단계 (2025-10-20 기준)
- 핵심 기능(MVP) 구현 완료, 관리자 검수·신고·분석 삭제까지 실사용 수준.
- fallback 기반 문제/분석 생성 품질이 월고 기출 스펙과 맞춰지며, 베타 서비스 QA를 진행 중입니다.
- Vercel(프런트) + Render(백엔드) 배포 가이드를 따라 베타 테스트 준비에 들어갔어요.

## Next 3 (오늘 우선순위)
1. **분석·단어 문제 최종 QA** – UI에서 새 필드(해석, 배경, 보기 해설)가 실제로 채워지는지 베타 전 점검.
2. **관리자 화면 색상 토큰 마무리** – 남은 하드코딩 색상을 토큰으로 교체해 다크 모드 대비를 완성.
3. **Seed 데이터 자동 주입 스크립트 검증** – 베타 계정/랭크/티어 초기화를 한 번에 실행하도록 리허설.

## Known Issues
- admin ProblemFeedback / DocumentAnalysis 일부 배지 색상이 아직 하드코딩이라 다크 모드에서 대비가 낮아요.
- fallback vocabulary/grammar JSON을 대량으로 다시 뽑을 때 WordNet 초기화가 느려 1회성 지연이 생길 수 있어요.
- UI/API 통합 테스트는 수동 QA로만 점검했습니다. 자동화된 end-to-end 테스트는 아직 준비 중이에요.
- Google Translate 무료 API는 호출 제한이 있으므로 Render 배포 시 캐시 파일 삭제에 주의해야 해요.

## Resolved – 2025-10-20 (오류 반복 방지)
- 분석 저장 시 빈 텍스트가 들어오면 즉시 실패 처리하고, 한국어 번역과 핵심 키워드가 채워져야 저장되도록 검증기를 추가했어요.
- 관리자 분석 보기에서 404가 나던 라우트를 고치고, 실패 시 친절한 안내를 띄운 뒤 삭제 기능으로 정리할 수 있게 했어요.
- React 테마 토큰을 통일해 다크 모드 글씨/배경 대비 부족 문제를 재발하지 않도록 공용 팔레트를 강제했어요.
- README · BUILDLOG · PROJECT_STATE를 같은 정보로 맞춰 문서끼리 다른 지침을 주지 않도록 동기화했어요.
